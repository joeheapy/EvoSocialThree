<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
    <script src="{{ url_for('static', filename='js/spinner.js') }}"></script>
    <script src="{{ url_for('static', filename='js/target-cards.js') }}"></script>
    <title>EvoSocialOne</title>
  </head>
  <body>
    <!-- Include spinner component at the top -->
    {% include 'components/spinner.html' %}

    <div class="top-bar"></div>
    <header class="header">
      <div class="header-content">
        <a href="#" class="logo"
          ><strong>EvoSocialOne</strong> (Computation policymaking simulator)</a
        >
      </div>
    </header>

    <div class="hero-background">
      <div class="main-container no-padding">
        {% include 'components/input_form.html' %}
      </div>
    </div>

    <main class="main-container">
      <!-- Step 2: Actors Analysis - Show if problem has been submitted -->
      {% if results.problem_submitted %}
      <section id="step-2-actors-analysis" class="content-section">
        <div class="step-heading">
          <span class="step-label-dark">Step 2</span>
          <h2>Infer actors in the ecosystem</h2>
        </div>
        <div>
          <p class="step-description">
            Identify the major sectors and actors involved in the problem. This
            analysis will help us understand who can contribute to solving the
            problem and how their actions impact the system.
            <span class="time-label">10-15 seconds</span>
          </p>
        </div>

        {% include 'components/actors_table.html' %}
      </section>
      {% endif %}

      <!-- Step 3: Outcome Targets - Only show if actors analysis is complete -->
      {% if results.actors_table %}
      <section id="step-3-outcome-targets" class="content-section">
        <div class="step-heading">
          <span class="step-label-dark">Step 3</span>
          <h2>Propose measureable system outcomes</h2>
        </div>
        <div>
          <p class="step-description">
            Propose desirable measurable outcome targets that can be used to
            track progress towards solving the problem. These targets will be
            used to evaluate the effectiveness of strategies and interventions.
            <strong>Choose one</strong> of the three targets suggest to drive
            the simluation. <span class="time-label">8-10 seconds</span>
          </p>
        </div>
        {% include 'components/outcome_targets.html' %}
      </section>
      {% endif %}

      <!-- Step 4: Payoffs - Only show if system objective is selected -->
      {% if results.system_objective_selected %}
      <section id="step-4-payoffs" class="content-section">
        <div class="step-heading">
          <span class="step-label-dark">Step 4</span>
          <h2>Calculate payoffs and estimate the share of behaviours</h2>
        </div>
        <div>
          <p class="step-description">
            Calculate the payoffs for each strategy, considering both the impact
            on the target metric and the private costs to each actor. The size
            of each payoff is an indicator of how likley an actor is to adopt
            each strategy. Payoffs drive the evolutionary dynamics of the
            system. Then, estimate the share of behaviours for each strategy
            based on the calculated payoffs.
            <span class="time-label">40-50 seconds</span>
          </p>
        </div>
        {% include 'components/payoffs_table.html' %}

        <!-- Pay-offs analysis - Only show if payoffs table has data -->
        {% if results.payoffs_table %}
        <div id="payoffs-analysis-section" class="content-section">
          <div class="step-heading">
            <span class="step-label-dark">Step 5</span>
            <h2>Quickly analyse three example strategies</h2>
          </div>
          <div>
            <p class="step-description">
              Pick three example strategies from the range and provide a quick
              analysis to indicate their economic attractiveness.
              <span class="time-label">10-15 seconds</span>
            </p>
          </div>
          {% include 'components/payoffs_analysis.html' %}
        </div>
        {% endif %}
      </section>
      {% endif %}
    </main>
  </body>
</html>
